name: tf-cloud-vars

on: 
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:  
    # - name: Set some secret key
    #   uses: cbsinteractive/create-tfc-workspace-variable-action@v1
    #   with:
    #       tfcToken: ${{ secrets.tfc_org_token }}
    #       orgName: ${{ secrets.tfc_org }}
    #       workspaceName: some-tfc-workspace-name
    #       variableName: some_secret_key
    #       category: terraform
    #       sensitive: true
    #       value: ${{ secrets.some_secret_key }}

      - name: Terraform API Integration Create Variable
        uses: Mona-bele/action-integration-terraform@main
        with:
          tf_api_token: 'R9B4jTTmOytwCA.atlasv1.Qqpy1HW3CeKN5g2PKWXFsXgPzbQ1q8MB1jRhMYKo25SV9svD3ESOUlV6cYBFY3L6vsc'
          tf_workspace: "cloud_user_p_99650270"
          tf_organization: "Cloudtech"
          tf_run_type: 'variable_create'
          tf_variable_key: 'test'
          tf_variable_value: 'test'
          tf_variable_category: 'terraform'
          tf_variable_sensitive: 'false'
          tf_variable_hcl: 'false'
          tf_variable_description: 'test'

      - name: Terraform API Integration Delete Variable
        uses: Mona-bele/action-integration-terraform@main
        with:
          tf_api_token: 'R9B4jTTmOytwCA.atlasv1.Qqpy1HW3CeKN5g2PKWXFsXgPzbQ1q8MB1jRhMYKo25SV9svD3ESOUlV6cYBFY3L6vsc'
          tf_workspace: 'cloud_user_p_99650270'
          tf_organization: 'Cloudtech'
          tf_run_type: 'variable_delete'
          tf_variable_key: 'test'

    # - name: Set some secret key
    #   uses: cbsinteractive/update-tfc-workspace-variable-value-action@v1
    #   with:
    #       tfcToken: xaatefhNYa6HJA.atlasv1.CgjrOKOj6DFeq3qIZmTjUJrh0u8scaBYkwccOwhAQoQ9g5Ym24dhKE1RxMZHFIEcRVg
    #       orgName: "Cloudtech"
    #       workspaceName: "cloud_user_p_99650270"
    #       variableName: some_secret_key
    #       value: "12345"

      - name: Set some secret key
        uses: cbsinteractive/create-tfc-workspace-variable-action@v1
        with:
            tfcToken: 'R9B4jTTmOytwCA.atlasv1.Qqpy1HW3CeKN5g2PKWXFsXgPzbQ1q8MB1jRhMYKo25SV9svD3ESOUlV6cYBFY3L6vsc'
            orgName: 'Cloudtech'
            workspaceName: 'cloud_user_p_99650270'
            variableName: some_secret_key
            category: terraform
            sensitive: false
            value: 'vvvvv'